"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}"undefined"!=typeof document&&function(e,t){var r=e.createElement("style");if(e.getElementsByTagName("head")[0].appendChild(r),r.styleSheet)r.styleSheet.disabled||(r.styleSheet.cssText=t);else try{r.innerHTML=t}catch(e){r.innerText=t}}(document,".term{font-family:courier,fixed,swiss,sans-serif;font-size:12px;color:#33d011;background:0 0}.termReverse{color:#111;background:#33d011}#terminal-overlay{background:rgba(0,0,0,.85);width:100%;height:100%;position:fixed;top:0;left:0}#terminal{display:inline-block;position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);box-shadow:5px 5px 20px 0 rgba(0,0,0,.2);transition:all .5s ease-out 0s}#terminal>table>tbody>tr>td{border-radius:4px}#terminal .term,#terminal .termReverse{font-size:14px;font-family:monospace}#terminal .term{color:#E5E5E5}#terminal .termReverse{background:#fff}");var Terminal=function e(t){for(var r in"object"!=_typeof(t)&&(t=new Object),this.Defaults)void 0===t[r]&&(t[r]=this.Defaults[r]);"function"!=typeof t.handler&&(t.handler=e.prototype.defaultHandler),this.conf=t,this.setInitValues()};Terminal.prototype={version:"1.66 (original)",Defaults:{cols:80,rows:24,x:100,y:100,termDiv:"termDiv",bgColor:"#181818",frameColor:"#555555",frameWidth:1,rowHeight:15,blinkDelay:500,fontClass:"term",crsrBlinkMode:!1,crsrBlockMode:!0,DELisBS:!1,printTab:!0,printEuro:!0,catchCtrlH:!0,closeOnESC:!0,historyUnique:!1,id:0,ps:">",greeting:"%+r Terminal ready. %-r",handler:null,ctrlHandler:null,initHandler:null,exitHandler:null,wrapping:!1,mapANSI:!1,ANSItrueBlack:!1,textBlur:0,textColor:""},setInitValues:function(){if(this.isSafari=navigator.userAgent.indexOf("Safari")>=0||navigator.userAgent.indexOf("WebKit")>=0,this.isOpera=!!(window.opera&&navigator.userAgent.indexOf("Opera")>=0),this.isChrome=navigator.userAgent.indexOf("Chrome/")>=0&&navigator.userAgent.indexOf("WebKit")>=0,this.domAPI=!(!document||!document.createElement),this.isMac=navigator.userAgent.indexOf("Mac")>=0,this.id=this.conf.id,this.maxLines=this.conf.rows,this.maxCols=this.conf.cols,this.termDiv=this.conf.termDiv,this.crsrBlinkMode=this.conf.crsrBlinkMode,this.crsrBlockMode=this.conf.crsrBlockMode,this.blinkDelay=this.conf.blinkDelay,this.DELisBS=this.conf.DELisBS,this.printTab=this.conf.printTab,this.printEuro=this.conf.printEuro,this.catchCtrlH=this.conf.catchCtrlH,this.closeOnESC=this.conf.closeOnESC,this.historyUnique=this.conf.historyUnique,this.ps=this.conf.ps,this.closed=!1,this.r,this.c,this.charBuf=new Array,this.styleBuf=new Array,this.scrollBuf=null,this.blinkBuffer=0,this.blinkTimer,this.cursoractive=!1,this.lock=!0,this.insert=!1,this.charMode=!1,this.rawMode=!1,this.lineBuffer="",this.inputChar=0,this.lastLine="",this.guiCounter=0,this.history=new Array,this.histPtr=0,this.env=new Object,this.buckupBuffer=null,this.handler=this.conf.handler,this.wrapping=this.conf.wrapping,this.mapANSI=this.conf.mapANSI,this.ANSItrueBlack=this.conf.ANSItrueBlack,this.ctrlHandler=this.conf.ctrlHandler,this.initHandler=this.conf.initHandler,this.exitHandler=this.conf.exitHandler,this.fieldMode=!1,this.fieldStart=this.fieldEnd=this.fieldC=0,"object"===_typeof(this.conf.textBlur)&&this.conf.textBlur.length){for(var e=[],t=0;t<this.conf.textBlur.length;t++){var r=Number(this.conf.textBlur[t]);!isNaN(r)&&r>0&&e.push(r)}this.textBlur=e.length?e:0}else this.textBlur=Number(this.conf.textBlur),(isNaN(this.textBlur)||this.textBlur<0||this.textBlur>40)&&(this.textBlur=0);this.textColor=this.conf.textColor||""},defaultHandler:function(){this.newLine(),""!=this.lineBuffer&&(this.type("You typed: "+this.lineBuffer),this.newLine()),this.prompt()},open:function(){return!!this.termDivReady()&&(this.closed||this._makeTerm(),this.init(),!0)},close:function(){this.lock=!0,this.cursorOff(),this.exitHandler&&this.exitHandler(),this.globals.setVisible(this.termDiv,0),this.closed=!0},init:function(){if(this.guiReady())this.guiCounter=0,this.closed&&this.setInitValues(),this.clear(),this.globals.setVisible(this.termDiv,1),this.globals.enableKeyboard(this),this.initHandler?this.initHandler():(this.write(this.conf.greeting),this.newLine(),this.prompt());else{if(this.guiCounter++,this.guiCounter>18e3){if(!confirm("Terminal:\nYour browser hasn't responded for more than 2 minutes.\nRetry?"))return;this.guiCounter=0}this.globals.termToInitialze=this,window.setTimeout("Terminal.prototype.globals.termToInitialze.init()",200)}},getRowArray:function(e,t){for(var r=new Array,i=0;i<e;i++)r[i]=t;return r},wrapOn:function(){this.wrapping=!0},wrapOff:function(){this.wrapping=!1},setTextBlur:function(e){var t=!1;if("object"===_typeof(e)&&e.length){for(var r=[],i=0;i<e.length;i++){var n=Number(e[i]);!isNaN(n)&&n>0&&r.push(n)}this.textBlur=r.length?r:0,t=!0}else e=Number(e),(isNaN(e)||e<0||e>40)&&(e=0),e!=this.textBlur&&(this.textBlur=e,t=!0);if(t)for(var o=0,s=this.conf.rows;o<s;o++)this.redraw(o)},setTextColor:function(e){if(e||(e=""),e!=this.textColor){this.textColor=e;for(var t=0,r=this.conf.rows;t<r;t++)this.redraw(t)}},type:function(e,t){for(var r=0;r<e.length;r++){var i=e.charCodeAt(r);this.isPrintable(i)||(i=94),this.charBuf[this.r][this.c]=i,this.styleBuf[this.r][this.c]=t||0;var n=this.r;this._incCol(),this.r!=n&&this.redraw(n)}this.redraw(this.r)},write:function(e,t){if("object"!=_typeof(e)){if("string"!=typeof e&&(e=""+e),e.indexOf("\n")>=0){var r=e.split("\n");e=r.join("%n")}}else if((e=e.join?e.join("%n"):""+e).indexOf("\n")>=0){r=e.split("\n");e=r.join("%n")}this.mapANSI&&(e=this.globals.ANSI_map(e,this.ANSItrueBlack)),this._sbInit(t);for(var i=e.split("%"),n="%"!=e.charAt(0),o=0,s=this.globals.termStyleMarkup,a=0;a<i.length;a++)if(n)i[a].length>0?this._sbType(i[a],o):a>0&&this._sbType("%",o),n=!1;else{var l=i[a].charAt(0);if(0==i[a].length&&a>0)this._sbType("%",o),n=!0;else if("n"==l)this._sbNewLine(!0),i[a].length>1&&this._sbType(i[a].substring(1),o);else if("+"==l){"p"==(c=(c=i[a].charAt(1)).toLowerCase())?o=0:s[c]&&(o|=s[c]),i[a].length>2&&this._sbType(i[a].substring(2),o)}else if("-"==l){var c;"p"==(c=(c=i[a].charAt(1)).toLowerCase())?o=0:s[c]&&(o&=~s[c]),i[a].length>2&&this._sbType(i[a].substring(2),o)}else if(i[a].length>1&&"c"==l){var h=this._parseColor(i[a].substring(1));o=-16777201&o|h.style,h.rest&&this._sbType(h.rest,o)}else i[a].length>1&&"C"==i[a].charAt(0)&&"S"==i[a].charAt(1)?(this.clear(),this._sbInit(),i[a].length>2&&this._sbType(i[a].substring(2),o)):i[a].length>0&&this._sbType(i[a],o)}this._sbOut()},_parseColor:function(e){var t="",r=0;if(e.length)if("("==e.charAt(0)){for(var i="",n=1;n<e.length;n++){if(")"==(l=e.charAt(n))){e.length>n&&(t=e.substring(n+1));break}i+=l}if(i)if("@"==i.charAt(0))(o=this.globals.nsColors[i.substring(1).toLowerCase()])&&(r=256*(16+o));else if("#"==i.charAt(0)){var o,s=i.substring(1).toLowerCase();(o=this.globals.webColors[s])?r=65536*o:(s=this.globals.webifyColor(s))&&(r=65536*this.globals.webColors[s])}else if(i.length&&i.length<=2){var a=!1;for(n=0;n<i.length;n++)if(this.globals.isHexOnlyChar(i.charAt(n))){a=!0;break}s=a?parseInt(i,16):parseInt(i,10);(!isNaN(s)||s<=15)&&(r=256*s)}else r=256*this.globals.getColorCode(i)}else{var l=e.charAt(0);this.globals.isHexChar(l)?(r=256*this.globals.hexToNum[l],t=e.substring(1)):t=e}return{rest:t,style:r}},_sbInit:function(e){var t=this.scrollBuf=new Object,r=t.lines=new Array,i=t.styles=new Array;t.more=e,t.line=0,t.status=0,t.r=0,t.c=this.c,r[0]=this.getRowArray(this.conf.cols,0),i[0]=this.getRowArray(this.conf.cols,0);for(var n=0;n<this.c;n++)r[0][n]=this.charBuf[this.r][n],i[0][n]=this.styleBuf[this.r][n]},_sbType:function(e,t){for(var r=this.scrollBuf,i=0;i<e.length;i++){var n=e.charCodeAt(i);this.isPrintable(n)||(n=94),r.lines[r.r][r.c]=n,r.styles[r.r][r.c++]=t||0,r.c>=this.maxCols&&this._sbNewLine()}},_sbNewLine:function(e){var t=this.scrollBuf;this.wrapping&&e&&(t.lines[t.r][t.c]=10,t.lines[t.r].length=t.c+1),t.r++,t.c=0,t.lines[t.r]=this.getRowArray(this.conf.cols,0),t.styles[t.r]=this.getRowArray(this.conf.cols,0)},_sbWrap:function(){var e=new Object;e.lines=new Array,e.styles=new Array,e.lines[0]=this.getRowArray(this.conf.cols,0),e.styles[0]=this.getRowArray(this.conf.cols,0),e.r=0,e.c=0;var t,r,i,n,o=this.scrollBuf,s=o.lines,a=o.styles,l=this.c,c=0,h=0;e.cBreak=!1;for(var u=0;u<s.length;u++){i=s[u],n=a[u];for(var f=0;f<i.length;f++)if(t=i[f],r=n[f],t){var d=this.globals.wrapChars[t];10==t&&(d=1),d?(2==d?l++:4==d&&(l++,i[f]=45),this._wbOut(e,c,h,l),10==t?this._wbIncLine(e):1==d&&e.c<this.maxCols&&(e.lines[e.r][e.c]=t,e.styles[e.r][e.c++]=r,e.c>=this.maxCols&&this._wbIncLine(e)),3==d?(c=u,h=f,l=1):(l=0,c=u,(h=f+1)==i.length&&(c++,h=0),4==d&&(e.cBreak=!0))):l++}}l&&(e.cBreak&&0!=e.c&&e.c--,this._wbOut(e,c,h,l)),o.lines=e.lines,o.styles=e.styles,o.r=e.r,o.c=e.c},_wbOut:function(e,t,r,i){var n,o,s=this.scrollBuf,a=s.lines,l=s.styles,c=0;if(i+e.c>this.maxCols)if(i<this.maxCols)this._wbIncLine(e);else{var h=0;for(c=this.maxCols-e.c,n=a[t],o=l[t];;){for(var u=h;u<c;u++)e.lines[e.r][e.c]=n[r],e.styles[e.r][e.c++]=o[r++],r==a[t].length&&(r=0,n=a[++t],o=l[t]);if(this._wbIncLine(e),i-c<this.maxCols)break;h=c,c+=this.maxCols}}else e.cBreak&&e.c--;n=a[t],o=l[t];for(u=c;u<i;u++)e.lines[e.r][e.c]=n[r],e.styles[e.r][e.c++]=o[r++],r==a[t].length&&(r=0,n=a[++t],o=l[t]);e.cBreak=!1},_wbIncLine:function(e){e.r++,e.c=0,e.lines[e.r]=this.getRowArray(this.conf.cols,0),e.styles[e.r]=this.getRowArray(this.conf.cols,0)},_sbOut:function(){var e=this.scrollBuf;this.wrapping&&!e.status&&this._sbWrap();var t=e.lines,r=e.styles,i=this.charBuf,n=this.styleBuf,o=this.maxLines,s=t.length;if(e.more)if(e.status){if(this.inputChar==this.globals.lcMoreKeyAbort)return this.r=o-1,this.c=0,i[this.r]=this.getRowArray(this.conf.cols,0),n[this.r]=this.getRowArray(this.conf.cols,0),this.redraw(this.r),this.handler=e.handler,this.charMode=!1,this.inputChar=0,this.scrollBuf=null,void this.prompt();if(this.inputChar!=this.globals.lcMoreKeyContinue)return;this.clear()}else this.r>=o-1&&this.clear();if(this.r+s-e.line<=o){for(var a=e.line;a<s;a++){i[c=this.r+a-e.line]=t[a],n[c]=r[a],this.redraw(c)}if(this.r+=e.r-e.line,this.c=e.c,e.more)return e.status&&(this.handler=e.handler),this.charMode=!1,this.inputChar=0,this.scrollBuf=null,void this.prompt()}else{if(e.more){if(o--,0==e.status&&(e.handler=this.handler,this.handler=this._sbOut,this.charMode=!0,e.status=1),this.r){var l=o-this.r;for(a=e.line;a<l;a++){i[c=this.r+a-e.line]=t[a],n[c]=r[a],this.redraw(c)}}else for(l=e.line+o,a=e.line;a<l;a++){i[c=this.r+a-e.line]=t[a],n[c]=r[a],this.redraw(c)}return e.line=l,this.r=o,this.c=0,this.type(this.globals.lcMorePrompt1,this.globals.lcMorePromtp1Style),this.type(this.globals.lcMorePrompt2,this.globals.lcMorePrompt2Style),void(this.lock=!1)}if(s>=o){for(l=s-o,a=0;a<o;a++){var c=l+a;i[a]=t[c],n[a]=r[c],this.redraw(a)}this.r=o-1,this.c=e.c}else{var h=o-s;for(l=this.r-h,a=0;a<h;a++){c=l+a;for(var u=0;u<this.maxCols;u++)i[a][u]=i[c][u],n[a][u]=n[c][u];this.redraw(a)}for(a=0;a<s;a++){i[c=h+a]=t[a],n[c]=r[a],this.redraw(c)}this.r=o-1,this.c=e.c}}this.scrollBuf=null},typeAt:function(e,t,r,i){var n=this.r,o=this.c;this.cursorSet(e,t);for(var s=0;s<r.length;s++){var a=r.charCodeAt(s);this.isPrintable(a)||(a=94),this.charBuf[this.r][this.c]=a,this.styleBuf[this.r][this.c]=i||0;var l=this.r;this._incCol(),this.r!=l&&this.redraw(l)}this.redraw(this.r),this.r=n,this.c=o},statusLine:function(e,t,r){var i,n;t=t&&!isNaN(t)?15&parseInt(t):0,n=r&&r>0?this.conf.rows-r:this.conf.rows-1;for(var o=0;o<this.conf.cols;o++)o<e.length?(i=e.charCodeAt(o),this.isPrintable(i)||(i=94)):i=0,this.charBuf[n][o]=i,this.styleBuf[n][o]=t;this.redraw(n)},printRowFromString:function(e,t,r){var i;if(r=r&&!isNaN(r)?15&parseInt(r):0,e>=0&&e<this.maxLines){"string"!=typeof t&&(t=""+t);for(var n=0;n<this.conf.cols;n++)n<t.length?(i=t.charCodeAt(n),this.isPrintable(i)||(i=94)):i=0,this.charBuf[e][n]=i,this.styleBuf[e][n]=r;this.redraw(e)}},setChar:function(e,t,r,i){this.charBuf[t][r]=e,this.styleBuf[t][r]=i||0,this.redraw(t)},newLine:function(){this.c=0,this._incRow()},_charOut:function(e,t){this.charBuf[this.r][this.c]=e,this.styleBuf[this.r][this.c]=t||0,this.redraw(this.r),this._incCol()},_incCol:function(){this.c++,this.c>=this.maxCols&&(this.c=0,this._incRow())},_incRow:function(){this.r++,this.r>=this.maxLines&&(this._scrollLines(0,this.maxLines),this.r=this.maxLines-1)},_scrollLines:function(e,t){window.status="Scrolling lines ...";for(var r=++e;r<t;r++){var i=r-1;this.charBuf[i]=this.charBuf[r],this.styleBuf[i]=this.styleBuf[r]}i=t-1;this.charBuf[i]=this.getRowArray(this.conf.cols,0),this.styleBuf[i]=this.getRowArray(this.conf.cols,0),this.redraw(i);for(var n=t-1;n>=e;n--)this.redraw(n-1);window.status=""},clear:function(){window.status="Clearing display ...",this.cursorOff(),this.insert=!1;for(var e=0;e<this.maxLines;e++)this.charBuf[e]=this.getRowArray(this.conf.cols,0),this.styleBuf[e]=this.getRowArray(this.conf.cols,0),this.redraw(e);this.r=0,this.c=0,window.status=""},reset:function(){this.lock||(this.lock=!0,this.rawMode=!1,this.charMode=!1,this.maxLines=this.conf.rows,this.maxCols=this.conf.cols,this.lastLine="",this.lineBuffer="",this.inputChar=0,this.clear())},scan:function(){var e=this;return this.scanning=!0,new Promise(function(t,r){e.prompt(),e.scanResolve=t})},scanned:function(e){this.scanning=!1,this.scanResolve(e)},prompt:function(){this.lock=!0,this.c>0&&this.newLine(),this.scanning||(this.write("function"==typeof this.ps?this.ps():this.ps),this._charOut(1)),this.lock=!1,this.cursorOn()},isPrintable:function(e,t){return!(!this.wrapping||4!=this.globals.wrapChars[e])||(t&&e>255?!(e!=this.termKey.EURO||!this.printEuro):e>=32&&e!=this.termKey.DEL||this.printTab&&e==this.termKey.TAB)},cursorSet:function(e,t){var r=this.cursoractive;r&&this.cursorOff(),this.r=e%this.maxLines,this.c=t%this.maxCols,this._cursorReset(r)},cursorOn:function(){this.blinkTimer&&clearTimeout(this.blinkTimer),this.blinkBuffer=this.styleBuf[this.r][this.c],this._cursorBlink(),this.cursoractive=!0},cursorOff:function(){this.blinkTimer&&clearTimeout(this.blinkTimer),this.cursoractive&&(this.styleBuf[this.r][this.c]=this.blinkBuffer,this.redraw(this.r),this.cursoractive=!1)},cursorLeft:function(){var e=this.cursoractive;e&&this.cursorOff();var t=this.r,r=this.c;r>0?r--:t>0&&(r=this.maxCols-1,t--),this.isPrintable(this.charBuf[t][r])&&(this.r=t,this.c=r),this.insert=!0,this._cursorReset(e)},cursorRight:function(){var e=this.cursoractive;e&&this.cursorOff();var t=this.r,r=this.c;r<this.maxCols-1?r++:t<this.maxLines-1&&(r=0,t++),this.isPrintable(this.charBuf[t][r])||(this.insert=!1),this.isPrintable(this.charBuf[this.r][this.c])&&(this.r=t,this.c=r),this._cursorReset(e)},backspace:function(){var e=this.cursoractive;e&&this.cursorOff();var t=this.r,r=this.c;r>0?r--:t>0&&(r=this.maxCols-1,t--),this.isPrintable(this.charBuf[t][r])&&(this._scrollLeft(t,r),this.r=t,this.c=r),this._cursorReset(e)},fwdDelete:function(){var e=this.cursoractive;e&&this.cursorOff(),this.isPrintable(this.charBuf[this.r][this.c])&&(this._scrollLeft(this.r,this.c),this.isPrintable(this.charBuf[this.r][this.c])||(this.insert=!1)),this._cursorReset(e)},_cursorReset:function(e){e?this.cursorOn():this.blinkBuffer=this.styleBuf[this.r][this.c]},_cursorBlink:function(){this.blinkTimer&&clearTimeout(this.blinkTimer),this==this.globals.activeTerm&&(this.crsrBlockMode?this.styleBuf[this.r][this.c]=1&this.styleBuf[this.r][this.c]?16777214&this.styleBuf[this.r][this.c]:1|this.styleBuf[this.r][this.c]:this.styleBuf[this.r][this.c]=2&this.styleBuf[this.r][this.c]?1048573&this.styleBuf[this.r][this.c]:2|this.styleBuf[this.r][this.c],this.redraw(this.r)),this.crsrBlinkMode&&(this.blinkTimer=setTimeout("Terminal.prototype.globals.activeTerm._cursorBlink()",this.blinkDelay))},_scrollLeft:function(e,t){var r=new Array;for(r[0]=e;this.isPrintable(this.charBuf[e][t]);){var i=e,n=t+1;if(n==this.maxCols){if(!(i<this.maxLines-1))break;n=0,i++,r[r.length]=i}this.charBuf[e][t]=this.charBuf[i][n],this.styleBuf[e][t]=this.styleBuf[i][n],t=n,e=i}0!=this.charBuf[e][t]&&(this.charBuf[e][t]=0);for(var o=0;o<r.length;o++)this.redraw(r[o])},_scrollRight:function(e,t){var r=new Array,i=this._getLineEnd(e,t),n=i[0],o=i[1];if(o==this.maxCols-1&&n==this.maxLines-1){if(0==e)return;this._scrollLines(0,this.maxLines),this.r--,e--,n--}for(r[e]=1;this.isPrintable(this.charBuf[n][o]);){var s=n,a=o+1;if(a==this.maxCols&&(a=0,r[++s]=1),this.charBuf[s][a]=this.charBuf[n][o],this.styleBuf[s][a]=this.styleBuf[n][o],n==e&&o==t)break;--o<0&&(o=this.maxCols-1,r[--n]=1)}for(var l=e;l<this.maxLines;l++)r[l]&&this.redraw(l)},_getLineEnd:function(e,t){if(this.isPrintable(this.charBuf[e][t])||--t<0&&(e>0?(e--,t=this.maxCols-1):t=0),this.isPrintable(this.charBuf[e][t]))for(;;){var r=e,i=t+1;if(i==this.maxCols){if(!(r<this.maxLines-1))break;r++,i=0}if(!this.isPrintable(this.charBuf[r][i]))break;t=i,e=r}return[e,t]},_getLineStart:function(e,t){if(!this.isPrintable(this.charBuf[e][t])){if(i=e,(r=t-1)<0){if(0==i)return[0,0];r=this.maxCols-1,i--}if(!this.isPrintable(this.charBuf[i][r]))return[e,t];e=i,t=r}for(;;){var r,i=e;if((r=t-1)<0){if(0==i)break;r=this.maxCols-1,i--}if(!this.isPrintable(this.charBuf[i][r]))break;e=i,t=r}return[e,t]},_getLine:function(e){var t=this._getLineEnd(this.r,this.c),r=t[0],i=t[1];!e||this.r==r&&this.c==i+1||(this.r=r,this.c=i+1,this.c>=this.maxCols&&(this.c=this.maxCols-1));for(var n=new Array;this.isPrintable(this.charBuf[r][i]);)if(n[n.length]=String.fromCharCode(this.charBuf[r][i]),i>0)i--;else{if(!(r>0))break;i=this.maxCols-1,r--}return n.reverse(),n.join("")},_clearLine:function(){for(var e=this._getLineEnd(this.r,this.c),t=e[0],r=e[1];this.isPrintable(this.charBuf[t][r]);)if(this.charBuf[t][r]=0,r>0)r--;else{if(!(t>0))break;this.redraw(t),r=this.maxCols-1,t--}t!=e[0]&&this.redraw(t),r++,this.cursorSet(t,r),this.insert=!1},backupScreen:function(){var e=this.backupBuffer=new Object,t=this.conf.rows,r=this.conf.cols;e.cbuf=new Array(t),e.sbuf=new Array(t),e.maxCols=this.maxCols,e.maxLines=this.maxLines,e.r=this.r,e.c=this.c,e.charMode=this.charMode,e.rawMode=this.rawMode,e.handler=this.handler,e.ctrlHandler=this.ctrlHandler,e.cursoractive=this.cursoractive,e.crsrBlinkMode=this.crsrBlinkMode,e.crsrBlockMode=this.crsrBlockMode,e.blinkDelay=this.blinkDelay,e.DELisBS=this.DELisBS,e.printTab=this.printTab,e.printEuro=this.printEuro,e.catchCtrlH=this.catchCtrlH,e.closeOnESC=this.closeOnESC,e.historyUnique=this.historyUnique,e.ps=this.ps,e.lineBuffer=this.lineBuffer,e.inputChar=this.inputChar,e.lastLine=this.lastLine,e.historyLength=this.history.length,e.histPtr=this.histPtr,e.wrapping=this.wrapping,e.mapANSI=this.mapANSI,e.ANSItrueBlack=this.ANSItrueBlack,this.cursoractive&&this.cursorOff();for(var i=0;i<t;i++)for(var n=this.charBuf[i],o=this.styleBuf[i],s=e.cbuf[i]=new Array(r),a=e.sbuf[i]=new Array(r),l=0;l<r;l++)s[l]=n[l],a[l]=o[l]},restoreScreen:function(){var e=this.backupBuffer;if(e){for(var t=this.conf.rows,r=0;r<t;r++)this.charBuf[r]=e.cbuf[r],this.styleBuf[r]=e.sbuf[r],this.redraw(r);this.maxCols=e.maxCols,this.maxLines=e.maxLines,this.r=e.r,this.c=e.c,this.charMode=e.charMode,this.rawMode=e.rawMode,this.handler=e.handler,this.ctrlHandler=e.ctrlHandler,this.cursoractive=e.cursoractive,this.crsrBlinkMode=e.crsrBlinkMode,this.crsrBlockMode=e.crsrBlockMode,this.blinkDelay=e.blinkDelay,this.DELisBS=e.DELisBS,this.printTab=e.printTab,this.printEuro=e.printEuro,this.catchCtrlH=e.catchCtrlH,this.closeOnESC=e.closeOnESC,this.historyUnique=e.historyUnique,this.ps=e.ps,this.lineBuffer=e.lineBuffer,this.inputChar=e.inputChar,this.lastLine=e.lastLine,this.history.length>e.historyLength&&(this.history.length=e.historyLength,this.histPtr=e.histPtr),this.wrapping=e.wrapping,this.mapANSI=e.mapANSI,this.ANSItrueBlack=e.ANSItrueBlack,this.cursoractive&&this.cursorOn(),this.backupBuffer=null}},swapBackup:function(){var e=this.backupBuffer;if(this.backupScreen,e){var t=this.backupBuffer;this.backupBuffer=e,this.restoreScreen(),this.backupBuffer=t}},escapeMarkup:function(e){return e.replace(/%/g,"%%")},enterFieldMode:function(e,t,r){this.cursorOff(),(void 0===e||e<0)&&(e=this.c),(void 0===t||t<e||t>this.maxCols)&&(t=this.maxCols),r||(r=0),this.fieldStart=e,this.fieldEnd=t,this.fieldStyle=r,this.fieldC=0,this.lastLine="",this.fieldMode=!0,this.rawMode=this.charMode=!1,1&r&&(this._crsrWasBlockMode=this.crsrBlockMode,this._crsrWasBlinkMode=this.crsrBlinkMode,this.crsrBlockMode=!1,this.crsrBlinkMode=!0),this.drawField(),this.lock=!1},exitFieldMode:function(){this.drawField(!0),this.fieldMode=!1,this.c=this.fieldEnd,this.c==this.maxLine&&this.newLine(),this.lock=!0},drawField:function(e){this.cursorOff(),e&&(this.fieldC=0);var t=this.fieldEnd-this.fieldStart;this.fieldC==this.lastLine.length&&t--;var r=this.fieldC-t;r<0&&(r=0);for(var i=r?this.lastLine.substring(r):this.lastLine,n=this.styleBuf[this.r],o=this.charBuf[this.r],s=i.length,a=this.fieldStart,l=0;a<this.fieldEnd;a++,l++)n[a]=this.fieldStyle,o[a]=l<s?i.charCodeAt(l):0;this.redraw(this.r),e?1&this.fieldStyle&&(this.crsrBlockMode=this._crsrWasBlockMode,this.crsrBlinkMode=this._crsrWasBlinkMode,delete this._crsrWasBlockMode,delete this._crsrWasBlinkMode):(this.c=this.fieldStart+this.fieldC-r,this.cursorOn())},focus:function(){this.globals.setFocus(this)},termKey:null,_makeTerm:function(e){window.status="Building terminal ...";var t=this.termDiv+"_r";if(this.domAPI){var r,i,n,o,s,a,l,c,h;this.globals.hasSubDivs=!1,(i=document.createElement("table")).setAttribute("border",0),i.setAttribute("cellSpacing",0),i.setAttribute("cellPadding",this.conf.frameWidth),n=document.createElement("tbody"),i.appendChild(n),r=document.createElement("tr"),n.appendChild(r),(h=document.createElement("td")).style.backgroundColor=this.conf.frameColor,r.appendChild(h),(o=document.createElement("table")).setAttribute("border",0),o.setAttribute("cellSpacing",0),o.setAttribute("cellPadding",2),s=document.createElement("tbody"),o.appendChild(s),a=document.createElement("tr"),s.appendChild(a),(l=document.createElement("td")).style.backgroundColor=this.conf.bgColor,a.appendChild(l),h.appendChild(o),h=l,(o=document.createElement("table")).setAttribute("border",0),o.setAttribute("cellSpacing",0),o.setAttribute("cellPadding",0),s=document.createElement("tbody"),o.appendChild(s);for(var u="",f=0;f<this.conf.cols;f++)u+="&nbsp;";for(var d=0;d<this.conf.rows;d++)a=document.createElement("tr"),(l=document.createElement("td")).id=t+d,l.style.height=l.style.minHeight=l.style.maxHeight=this.conf.rowHeight,l.style.whiteSpace="nowrap",l.className=this.conf.fontClass,l.innerHTML=u,a.appendChild(l),s.appendChild(a);for(h.appendChild(o),c=document.getElementById(this.termDiv);c.hasChildNodes();)c.removeChild(c.firstChild);c.appendChild(i)}else{this.globals.hasSubDivs=navigator.userAgent.indexOf("Gecko")<0;var p="",m=!this.conf.bgColor||"none"===this.conf.bgColor&&"transparent"==this.conf.bgColor?"":' bgcolor="'+this.conf.bgColor+'"',y=!this.conf.frameColor||"none"===this.conf.frameColor&&"transparent"==this.conf.frameColor?"":' bgcolor="'+this.conf.frameColor+'"';p+='<table border="0" cellspacing="0" cellpadding="'+this.conf.frameWidth+'">\n',p+="<tr><td"+y+'><table border="0" cellspacing="0" cellpadding="2"><tr><td'+m+'><table border="0" cellspacing="0" cellpadding="0">\n';for(u="",f=0;f<this.conf.cols;f++)u+="&nbsp;";for(d=0;d<this.conf.rows;d++){var b=this.globals.hasSubDivs?"":' id="'+t+d+'"';p+='<tr><td nowrap height="'+this.conf.rowHeight+'"'+b+' class="'+this.conf.fontClass+'">'+u+"</td></tr>\n"}p+="</table></td></tr>\n",p+="</table></td></tr>\n",p+="</table>\n";this.conf.frameWidth;if(this.globals.hasSubDivs){for(d=0;d<this.conf.rows;d++)p+='<div id="'+t+d+'" class="'+this.conf.fontClass+'"></div>\n';this.globals.termStringStart='<table border="0" cellspacing="0" cellpadding="0"><tr><td nowrap height="'+this.conf.rowHeight+'" class="'+this.conf.fontClass+'">',this.globals.termStringEnd="</td></tr></table>"}this.globals.writeElement(this.termDiv,p)}e||(this.globals.setElementXY(this.termDiv,this.conf.x,this.conf.y),this.globals.setVisible(this.termDiv,1)),window.status=""},rebuild:function(){for(var e=this.conf.rows,t=this.conf.cols,r=0;r<e;r++){var i=this.charBuf[r];if(i){if(i.length<t)for(var n=i.length;n<t;n++)this.charBuf[r][n]=0,this.styleBuf[r][n]=0}else this.charBuf[r]=this.getRowArray(t,0),this.styleBuf[r]=this.getRowArray(t,0)}var o=!1;this.r>=e&&(r=e-1,o=!0),this.c>=t&&(n=t-1,o=!0),o&&this.cursoractive&&this.cursorOn(),this._makeTerm(!0);for(r=0;r<e;r++)this.redraw(r);this.backupBuffer=null},moveTo:function(e,t){this.globals.setElementXY(this.termDiv,e,t)},resizeTo:function(e,t){return!!this.termDivReady()&&(e=parseInt(e,10),t=parseInt(t,10),!(isNaN(e)||isNaN(t)||e<4||t<2)&&(this.maxCols=this.conf.cols=e,this.maxLines=this.conf.rows=t,this._makeTerm(),this.clear(),!0))},redraw:function(e){for(var t=this.globals.termStringStart,r=0,i=this.globals.termStyles,n=this.globals.termStyleClose,o=this.globals.termStyleOpen,s=this.globals.termSpecials,a=this.globals.colorCodes,l=this.globals.nsColorCodes,c=this.globals.webColorCodes,h=this.charBuf,u=this.styleBuf,f=this.textBlur,d="",p=this.textColor||"",m=0;m<this.conf.cols;m++){var y=h[e][m],b=u[e][m];if(b!=r||0==m&&p){if(r){16776960&r&&(t+="</span>");for(var g=i.length-1;g>=0;g--){r&(w=i[g])&&(t+=n[w])}}r=b;for(g=0;g<i.length;g++){r&(w=i[g])&&(t+=o[w])}if(d=p,65280&r){var v=(65280&r)>>>8;d=v<16?a[v]:"#"+l[v-16]}else 16711680&r&&(d="#"+c[(16711680&r)>>>16]);d&&(1&r?t+='<span style="background-color:'+d+' !important;">':"object"===_typeof(f)?t+='<span style="color:'+d+" !important; text-shadow: 0 0 "+f.join("px "+d+", 0 0 ")+"px "+d+';">':t+=f?'<span style="color:'+d+" !important; text-shadow: 0 0 "+f+"px "+d+';">':'<span style="color:'+d+' !important;">')}t+=s[y]?s[y]:String.fromCharCode(y)}if(r>0){16776960&r&&(t+="</span>");for(g=i.length-1;g>=0;g--){var w;r&(w=i[g])&&(t+=n[w])}}t+=this.globals.termStringEnd,this.globals.writeElement(this.termDiv+"_r"+e,t)},guiReady:function(){var e=!0;if(this.globals.guiElementsReady(this.termDiv)){for(var t=0;t<this.conf.rows;t++)if(0==this.globals.guiElementsReady(this.termDiv+"_r"+t)){e=!1;break}}else e=!1;return e},termDivReady:function(){return document.getElementById?!!document.getElementById(this.termDiv):!!document.all&&!!document.all[this.termDiv]},getDimensions:function(){var e=0,t=0,r=this.termDiv;if(document.getElementById)(i=document.getElementById(r))&&i.firstChild?(e=parseInt(i.firstChild.offsetWidth,10),t=parseInt(i.firstChild.offsetHeight,10)):i&&i.children&&i.children[0]&&(e=parseInt(i.children[0].offsetWidth,10),t=parseInt(i.children[0].offsetHeight,10));else if(document.all){var i;(i=document.all[r])&&i.children&&i.children[0]&&(e=parseInt(i.children[0].offsetWidth,10),t=parseInt(i.children[0].offsetHeight,10))}return{width:e,height:t}},globals:{termToInitialze:null,activeTerm:null,kbdEnabled:!1,keylock:!1,keyRepeatDelay1:450,keyRepeatDelay2:100,keyRepeatTimer:null,lcMorePrompt1:" -- MORE -- ",lcMorePromtp1Style:1,lcMorePrompt2:" (Type: space to continue, 'q' to quit)",lcMorePrompt2Style:0,lcMoreKeyAbort:113,lcMoreKeyContinue:32,_initGlobals:function(){var e=Terminal.prototype.globals;e._extendMissingStringMethods(),e._initWebColors(),e._initDomKeyRef(),Terminal.prototype.termKey=e.termKey},getHexChar:function(e){var t=Terminal.prototype.globals;return t.isHexChar(e)?t.hexToNum[e]:-1},isHexChar:function(e){return e>="0"&&e<="9"||e>="a"&&e<="f"||e>="A"&&e<="F"},isHexOnlyChar:function(e){return e>="a"&&e<="f"||e>="A"&&e<="F"},hexToNum:{0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,b:11,c:12,d:13,e:14,f:15,A:10,B:11,C:12,D:13,E:14,F:15},webColors:[],webColorCodes:[""],colors:{black:1,red:2,green:3,yellow:4,blue:5,magenta:6,cyan:7,white:8,grey:9,red2:10,green2:11,yellow2:12,blue2:13,magenta2:14,cyan2:15,red1:2,green1:3,yellow1:4,blue1:5,magenta1:6,cyan1:7,gray:9,darkred:10,darkgreen:11,darkyellow:12,darkblue:13,darkmagenta:14,darkcyan:15,default:0,clear:0},colorCodes:["","#000000","#ff0000","#00ff00","#ffff00","#0066ff","#ff00ff","#00ffff","#ffffff","#808080","#990000","#009900","#999900","#003399","#990099","#009999"],nsColors:{aliceblue:1,antiquewhite:2,aqua:3,aquamarine:4,azure:5,beige:6,black:7,blue:8,blueviolet:9,brown:10,burlywood:11,cadetblue:12,chartreuse:13,chocolate:14,coral:15,cornflowerblue:16,cornsilk:17,crimson:18,darkblue:19,darkcyan:20,darkgoldenrod:21,darkgray:22,darkgreen:23,darkkhaki:24,darkmagenta:25,darkolivegreen:26,darkorange:27,darkorchid:28,darkred:29,darksalmon:30,darkseagreen:31,darkslateblue:32,darkslategray:33,darkturquoise:34,darkviolet:35,deeppink:36,deepskyblue:37,dimgray:38,dodgerblue:39,firebrick:40,floralwhite:41,forestgreen:42,fuchsia:43,gainsboro:44,ghostwhite:45,gold:46,goldenrod:47,gray:48,green:49,greenyellow:50,honeydew:51,hotpink:52,indianred:53,indigo:54,ivory:55,khaki:56,lavender:57,lavenderblush:58,lawngreen:59,lemonchiffon:60,lightblue:61,lightcoral:62,lightcyan:63,lightgoldenrodyellow:64,lightgreen:65,lightgrey:66,lightpink:67,lightsalmon:68,lightseagreen:69,lightskyblue:70,lightslategray:71,lightsteelblue:72,lightyellow:73,lime:74,limegreen:75,linen:76,maroon:77,mediumaquamarine:78,mediumblue:79,mediumorchid:80,mediumpurple:81,mediumseagreen:82,mediumslateblue:83,mediumspringgreen:84,mediumturquoise:85,mediumvioletred:86,midnightblue:87,mintcream:88,mistyrose:89,moccasin:90,navajowhite:91,navy:92,oldlace:93,olive:94,olivedrab:95,orange:96,orangered:97,orchid:98,palegoldenrod:99,palegreen:100,paleturquoise:101,palevioletred:102,papayawhip:103,peachpuff:104,peru:105,pink:106,plum:107,powderblue:108,purple:109,red:110,rosybrown:111,royalblue:112,saddlebrown:113,salmon:114,sandybrown:115,seagreen:116,seashell:117,sienna:118,silver:119,skyblue:120,slateblue:121,slategray:122,snow:123,springgreen:124,steelblue:125,tan:126,teal:127,thistle:128,tomato:129,turquoise:130,violet:131,wheat:132,white:133,whitesmoke:134,yellow:135,yellowgreen:136},nsColorCodes:["","f0f8ff","faebd7","00ffff","7fffd4","f0ffff","f5f5dc","000000","0000ff","8a2be2","a52a2a","deb887","5f9ea0","7fff00","d2691e","ff7f50","6495ed","fff8dc","dc143c","00008b","008b8b","b8860b","a9a9a9","006400","bdb76b","8b008b","556b2f","ff8c00","9932cc","8b0000","e9967a","8fbc8f","483d8b","2f4f4f","00ced1","9400d3","ff1493","00bfff","696969","1e90ff","b22222","fffaf0","228b22","ff00ff","dcdcdc","f8f8ff","ffd700","daa520","808080","008000","adff2f","f0fff0","ff69b4","cd5c5c","4b0082","fffff0","f0e68c","e6e6fa","fff0f5","7cfc00","fffacd","add8e6","f08080","e0ffff","fafad2","90ee90","d3d3d3","ffb6c1","ffa07a","20b2aa","87cefa","778899","b0c4de","ffffe0","00ff00","32cd32","faf0e6","800000","66cdaa","0000cd","ba55d3","9370db","3cb371","7b68ee","00fa9a","48d1cc","c71585","191970","f5fffa","ffe4e1","ffe4b5","ffdead","000080","fdf5e6","808000","6b8e23","ffa500","ff4500","da70d6","eee8aa","98fb98","afeeee","db7093","ffefd5","ffdab9","cd853f","ffc0cb","dda0dd","b0e0e6","800080","ff0000","bc8f8f","4169e1","8b4513","fa8072","f4a460","2e8b57","fff5ee","a0522d","c0c0c0","87ceeb","6a5acd","708090","fffafa","00ff7f","4682b4","d2b48c","008080","d8bfd8","ff6347","40e0d0","ee82ee","f5deb3","ffffff","f5f5f5","ffff00","9acd32"],_webSwatchChars:["0","3","6","9","c","f"],_initWebColors:function(){for(var e,t,r,i,n,o,s,a=Terminal.prototype.globals,l=(a._webColorSwatch,a.webColors),c=a.webColorCodes,h=1,u=0;u<6;u++){i=(e=a._webSwatchChars[u])+e;for(var f=0;f<6;f++){n=i+(t=a._webSwatchChars[f])+t,o=e+t;for(var d=0;d<6;d++)s=n+(r=a._webSwatchChars[d])+r,l[o+r]=l[s]=h,c[h]=s,h++}}},webifyColor:function(e){var t=Terminal.prototype.globals;if(6==e.length){for(var r="",i=0;i<6;i+=2){var n=e.charAt(i),o=e.charAt(i+1);if(!t.isHexChar(n)||!t.isHexChar(o))return"";r+=t._webSwatchChars[Math.round(parseInt(n+o,16)/255*5)]}return r}if(3==e.length){for(r="",i=0;i<3;i++){n=e.charAt(i);if(!t.isHexChar(n))return"";r+=t._webSwatchChars[Math.round(parseInt(n,16)/15*5)]}return r}return""},setColor:function(e,t){var r=Terminal.prototype.globals;if("number"==typeof e&&e>=1&&e<=15)r.colorCodes[e]=t;else if("string"==typeof e){if(1==(e=e.toLowerCase()).length&&r.isHexChar(e))(i=r.hexToNum[e])&&(r.colorCodes[i]=t);else if(void 0!==r.colors[e]){var i;(i=r.colors[e])&&(r.colorCodes[i]=t)}}},getColorString:function(e){var t=Terminal.prototype.globals;if("number"==typeof e&&e>=0&&e<=15)return t.colorCodes[e];if("string"==typeof e){if(1==(e=e.toLowerCase()).length&&t.isHexChar(e))return t.colorCodes[t.hexToNum[e]];if(void 0!==t.colors[e])return t.colorCodes[t.colors[e]]}return""},getColorCode:function(e){var t=Terminal.prototype.globals;if("number"==typeof e&&e>=0&&e<=15)return e;if("string"==typeof e){if(1==(e=e.toLowerCase()).length&&t.isHexChar(e))return parseInt(e,16);if(void 0!==t.colors[e])return t.colors[e]}return 0},insertText:function(e){var t=Terminal.prototype.globals,r=t.activeTerm;if(!r||r.closed||t.keylock||r.lock||r.charMode||r.fieldMode)return!1;for(var i=0;i<e.length;i++)t.keyHandler({which:e.charCodeAt(i),_remapped:!0});return!0},importEachLine:function(e){var t=Terminal.prototype.globals,r=t.activeTerm;if(!r||r.closed||t.keylock||r.lock||r.charMode||r.fieldMode)return!1;r.cursorOff(),r._clearLine();for(var i=(e=e.replace(/\r\n?/g,"\n")).split("\n"),n=0;n<i.length;n++){for(var o=0;o<i[n].length;o++)t.keyHandler({which:i[n].charCodeAt(o),_remapped:!0});t.keyHandler({which:term.termKey.CR,_remapped:!0})}return!0},importMultiLine:function(e){var t=Terminal.prototype.globals,r=t.activeTerm;if(!r||r.closed||t.keylock||r.lock||r.charMode||r.fieldMode)return!1;r.lock=!0,r.cursorOff(),r._clearLine();for(var i=(e=e.replace(/\r\n?/g,"\n")).split("\n"),n=0;n<i.length;n++)r.type(i[n]),n<i.length-1&&r.newLine();return r.lineBuffer=e,r.lastLine="",r.inputChar=0,r.handler(),!0},normalize:function(e,t){for(var r=""+e;r.length<t;)r="0"+r;return r},fillLeft:function(e,t){for("string"!=typeof e&&(e=""+e);e.length<t;)e=" "+e;return e},center:function(e,t){for(var r="",i=e.length;i<t;i+=2)r+=" ";return r+e},stringReplace:function(e,t,r){for(var i=e.length,n=t.length,o=r.indexOf(e);o>=0;)o=(r=r.substring(0,o)+t+r.substring(o+i)).indexOf(e,o+n);return r},wrapChars:{9:1,10:1,12:4,13:1,32:1,40:3,45:2,61:2,91:3,94:3,123:3},setFocus:function(e){Terminal.prototype.globals.activeTerm=e,Terminal.prototype.globals.clearRepeatTimer()},termKey:{NUL:0,SOH:1,STX:2,ETX:3,EOT:4,ENQ:5,ACK:6,BEL:7,BS:8,BACKSPACE:8,HT:9,TAB:9,LF:10,VT:11,FF:12,CR:13,SO:14,SI:15,DLE:16,DC1:17,DC2:18,DC3:19,DC4:20,NAK:21,SYN:22,ETB:23,CAN:24,EM:25,SUB:26,ESC:27,IS4:28,IS3:29,IS2:30,IS1:31,DEL:127,EURO:8364,LEFT:28,RIGHT:29,UP:30,DOWN:31},termDomKeyRef:{},_domKeyMappingData:{LEFT:"LEFT",RIGHT:"RIGHT",UP:"UP",DOWN:"DOWN",BACK_SPACE:"BS",RETURN:"CR",ENTER:"CR",ESCAPE:"ESC",DELETE:"DEL",TAB:"TAB"},_initDomKeyRef:function(){var e=Terminal.prototype.globals,t=e._domKeyMappingData,r=e.termDomKeyRef,i=e.termKey;for(var n in t)r["DOM_VK_"+n]=i[t[n]]},registerEvent:function(e,t,r,i){if(e.addEventListener)e.addEventListener(t.toLowerCase(),r,i);else{var n=t.toUpperCase();window.Event&&window.Event[n]&&e.captureEvents&&e.captureEvents(Event[n]),e["on"+t.toLowerCase()]=r}},releaseEvent:function(e,t,r,i){if(e.removeEventListener)e.removeEventListener(t.toLowerCase(),r,i);else{var n=t.toUpperCase();window.Event&&window.Event[n]&&e.releaseEvents&&e.releaseEvents(Event[n]),e[n="on"+t.toLowerCase()]&&e[n]==r&&(e.et=null)}},enableKeyboard:function(e){var t=Terminal.prototype.globals;t.kbdEnabled||(t.registerEvent(document,"keypress",t.keyHandler,!0),t.registerEvent(document,"keydown",t.keyFix,!0),t.registerEvent(document,"keyup",t.clearRepeatTimer,!0),t.kbdEnabled=!0),t.activeTerm=e},disableKeyboard:function(e){var t=Terminal.prototype.globals;t.kbdEnabled&&(t.releaseEvent(document,"keypress",t.keyHandler,!0),t.releaseEvent(document,"keydown",t.keyFix,!0),t.releaseEvent(document,"keyup",t.clearRepeatTimer,!0),t.kbdEnabled=!1),t.activeTerm=null},keyFix:function(e){var t,r=Terminal.prototype.globals,i=r.activeTerm;if(r.keylock||i.lock)return!0;if(window.event){if(e||(e=window.event),t=e.keyCode,e.DOM_VK_UP){for(var n in r.termDomKeyRef)if(e[n]&&t==e[n])return r.keyHandler({which:r.termDomKeyRef[n],_remapped:!0,_repeat:27==t}),e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,!1;return e.cancelBubble=!1,!0}var o=i.termKey,s=r.keyHandler;if(8!=t||i.isOpera)if(9==t)s({which:o.TAB,_remapped:!0,_repeat:!i.printTab});else if(27==t)s({which:o.ESC,_remapped:!0,_repeat:!i.printTab});else if(37==t)s({which:o.LEFT,_remapped:!0,_repeat:!0});else if(39==t)s({which:o.RIGHT,_remapped:!0,_repeat:!0});else if(38==t)s({which:o.UP,_remapped:!0,_repeat:!0});else if(40==t)s({which:o.DOWN,_remapped:!0,_repeat:!0});else if(127==t||46==t)s({which:o.DEL,_remapped:!0,_repeat:!0});else{if(!(t>=57373&&t<=57376))return e.cancelBubble=!1,!0;57373==t?s({which:o.UP,_remapped:!0,_repeat:!0}):57374==t?s({which:o.DOWN,_remapped:!0,_repeat:!0}):57375==t?s({which:o.LEFT,_remapped:!0,_repeat:!0}):57376==t&&s({which:o.RIGHT,_remapped:!0,_repeat:!0})}else s({which:o.BS,_remapped:!0,_repeat:!0});return e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,!1}},clearRepeatTimer:function(e){var t=Terminal.prototype.globals;t.keyRepeatTimer&&(clearTimeout(t.keyRepeatTimer),t.keyRepeatTimer=null)},doKeyRepeat:function(e){Terminal.prototype.globals.keyHandler({which:e,_remapped:!0,_repeated:!0})},keyHandler:function(e){var t,r=Terminal.prototype.globals,i=r.activeTerm;if(r.keylock||i.lock||i.isMac&&e&&e.metaKey)return!0;window.event?(window.event.preventDefault&&window.event.preventDefault(),window.event.stopPropagation&&window.event.stopPropagation()):e&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation());var n=!1,o=!1,s=!1,a=i.termKey,l=0;if(e)t=e.which,n=e.ctrlKey&&!e.altKey||2==e.modifiers,o=e.shiftKey||4==e.modifiers,e._remapped&&(s=!0,window.event&&(n=n||window.event.ctrlKey&&!window.event.altKey,o=o||window.event.shiftKey)),e._repeated?l=2:e._repeat&&(l=1);else{if(!window.event)return!0;t=window.event.keyCode,n=window.event.ctrlKey&&!window.event.altKey,o=window.event.shiftKey,window.event._repeated?l=2:window.event._repeat&&(l=1)}if(""==t&&0==s&&(null==e&&(e=window.event),0==e.charCode&&e.keyCode))if(e.DOM_VK_UP){var c=r.termDomKeyRef;for(var h in c)if(e[h]&&e.keyCode==e[h]){t=c[h];break}}else 28==e.keyCode?t=a.LEFT:29==e.keyCode?t=a.RIGHT:30==e.keyCode?t=a.UP:31==e.keyCode?t=a.DOWN:37==e.keyCode?t=a.LEFT:39==e.keyCode?t=a.RIGHT:38==e.keyCode?t=a.UP:40==e.keyCode?t=a.DOWN:9==e.keyCode&&(t=a.TAB);if(!(t>=57344&&t<=63743)){if(l&&(r.clearRepeatTimer(),r.keyRepeatTimer=window.setTimeout("Terminal.prototype.globals.doKeyRepeat("+t+")",1==l?r.keyRepeatDelay1:r.keyRepeatDelay2)),i.charMode)return i.insert=!1,i.inputChar=t,i.lineBuffer="",i.handler(),t<=32&&window.event&&(window.event.cancelBubble=!0),!1;if(!n){if(t==a.CR)return i.lock=!0,i.cursorOff(),i.insert=!1,i.rawMode?i.lineBuffer=i.lastLine:i.fieldMode?(i.lineBuffer=i.lastLine,i.exitFieldMode()):(i.lineBuffer=i._getLine(!0),""==i.lineBuffer||i.historyUnique&&0!=i.history.length&&i.lineBuffer==i.history[i.history.length-1]||i.scanning||(i.history[i.history.length]=i.lineBuffer),i.histPtr=i.history.length),i.lastLine="",i.inputChar=0,i.handler(),window.event&&(window.event.cancelBubble=!0),!1;if(i.fieldMode)return t==a.ESC?(i.lineBuffer=i.lastLine="",i.exitFieldMode(),i.lastLine="",i.inputChar=0,i.handler(),window.event&&(window.event.cancelBubble=!0),!1):(t==a.LEFT?i.fieldC>0&&i.fieldC--:t==a.RIGHT?i.fieldC<i.lastLine.length&&i.fieldC++:t==a.BS?i.fieldC>0&&(i.lastLine=i.lastLine.substring(0,i.fieldC-1)+i.lastLine.substring(i.fieldC),i.fieldC--):t==a.DEL?i.fieldC<i.lastLine.length&&(i.lastLine=i.lastLine.substring(0,i.fieldC)+i.lastLine.substring(i.fieldC+1)):t>=32&&(i.lastLine=i.lastLine.substring(0,i.fieldC)+String.fromCharCode(t)+i.lastLine.substring(i.fieldC),i.fieldC++),i.drawField(),!1);if(t==a.ESC&&i.conf.closeOnESC)return i.close(),window.event&&(window.event.cancelBubble=!0),!1;if(t<32&&i.rawMode)return window.event&&(window.event.cancelBubble=!0),!1;if(t==a.LEFT)return i.cursorLeft(),window.event&&(window.event.cancelBubble=!0),!1;if(t==a.RIGHT)return i.cursorRight(),window.event&&(window.event.cancelBubble=!0),!1;if(t==a.UP)return i.cursorOff(),i.histPtr==i.history.length&&(i.lastLine=i._getLine()),i._clearLine(),i.history.length&&i.histPtr>=0?(i.histPtr>0&&i.histPtr--,i.type(i.history[i.histPtr])):i.lastLine&&i.type(i.lastLine),i.cursorOn(),window.event&&(window.event.cancelBubble=!0),!1;if(t==a.DOWN)return i.cursorOff(),i.histPtr==i.history.length&&(i.lastLine=i._getLine()),i._clearLine(),i.history.length&&i.histPtr<=i.history.length?(i.histPtr<i.history.length&&i.histPtr++,i.histPtr<i.history.length?i.type(i.history[i.histPtr]):i.lastLine&&i.type(i.lastLine)):i.lastLine&&i.type(i.lastLine),i.cursorOn(),window.event&&(window.event.cancelBubble=!0),!1;if(t==a.BS)return i.backspace(),window.event&&(window.event.cancelBubble=!0),!1;if(t==a.DEL)return i.DELisBS?i.backspace():i.fwdDelete(),window.event&&(window.event.cancelBubble=!0),!1}return i.rawMode?(i.isPrintable(t)&&(i.lastLine+=String.fromCharCode(t)),32==t&&window.event?window.event.cancelBubble=!0:window.opera&&window.event&&(window.event.cancelBubble=!0),!1):i.conf.catchCtrlH&&(t==a.BS||n&&72==t)?(i.backspace(),window.event&&(window.event.cancelBubble=!0),!1):i.ctrlHandler&&(t<32||n&&i.isPrintable(t,!0))?((t>=65&&t<=96||63==t)&&(63==t?t=31:t-=64),i.inputChar=t,i.ctrlHandler(),window.event&&(window.event.cancelBubble=!0),!1):n||!i.isPrintable(t,!0)?(window.event&&(window.event.cancelBubble=!0),!1):!i.isPrintable(t,!0)||(i.blinkTimer&&clearTimeout(i.blinkTimer),i.insert&&(i.cursorOff(),i._scrollRight(i.r,i.c)),i._charOut(t),i.cursorOn(),32==t&&window.event?window.event.cancelBubble=!0:window.opera&&window.event&&(window.event.cancelBubble=!0),!1)}},hasSubDivs:!1,termStringStart:"",termStringEnd:"",termSpecials:{0:"&nbsp;",1:"&nbsp;",9:"&nbsp;",32:"&nbsp;",34:"&quot;",38:"&amp;",60:"&lt;",62:"&gt;",127:"&loz;",8364:"&euro;"},termStyles:[1,2,4,8,16],termStyleMarkup:{r:1,u:2,i:4,s:8,b:16},termStyleOpen:{1:'<span class="termReverse">',2:"<u>",4:"<i>",8:"<strike>",16:"<i>"},termStyleClose:{1:"</span>",2:"</u>",4:"</i>",8:"</strike>",16:"</i>"},assignStyle:function(e,t,r,i){var n=Terminal.prototype.globals;if((!e||isNaN(e))&&e>=256)alert("termlib.js:\nCould not assign style.\n"+o+" is not a valid power of 2 between 0 and 256.");else{for(var o=255&e,s=!1,a=0;a<8;a++)if(o>>>a&1){if(s)return void alert("termlib.js:\nCould not assign style code.\n"+o+" is not a power of 2!");s=!0}if(s)if("c"!=(t=String(t).toLowerCase())&&"p"!=t)if(t.length>1)alert('termlib.js:\nCould not assign mark up.\n"'+t+'" is not a single letter code.');else{var l=!1;for(a=0;a<n.termStyles.length;a++)if(n.termStyles[a]==o){l=!0;break}if(l){var c=n.termStyleMarkup[t];if(c&&c!=o)return void alert('termlib.js:\nCould not assign mark up.\n"'+t+'" is already in use.')}else{if(n.termStyleMarkup[t])return void alert('termlib.js:\nCould not assign mark up.\n"'+t+'" is already in use.');n.termStyles[n.termStyles.length]=o}n.termStyleMarkup[t]=o,n.termStyleOpen[o]=r,n.termStyleClose[o]=i}else alert('termlib.js:\nCould not assign mark up.\n"'+t+'" is a reserved code.');else alert("termlib.js:\nCould not assign style code.\n"+o+" is not a valid power of 2 between 0 and 256.")}},ANSI_regexp:/(\x1b\[|x9b)([0-9;]+?)([a-zA-Z])/g,ANIS_SGR_codes:{0:"%+p",1:"%+b",3:"%+i",4:"%+u",7:"%+r",9:"%+s",21:"%+u",22:"%-b",23:"%-i",24:"%-u",27:"%-r",29:"%-s",30:"%c(0)",31:"%c(a)",32:"%c(b)",33:"%c(c)",34:"%c(d)",35:"%c(e)",36:"%c(f)",37:"%c(#999)",39:"%c(0)",90:"%c(9)",91:"%c(2)",92:"%c(3)",93:"%c(4)",94:"%c(5)",95:"%c(6)",96:"%c(7)",97:"%c(8)",99:"%c(0)",trueBlack:"%c(1)"},ANSI_map:function(e,t){var r=Terminal.prototype.globals;return r.ANSI_regexp.lastIndex=0,e.replace(r.ANSI_regexp,function(e,i,n,o,s,a){return r.ANSI_replace(n,o,t)})},ANSI_replace:function(e,t,r){var i=Terminal.prototype.globals;if("m"==t){if(""==e)return i.ANIS_SGR_codes[0];if(r&&"30"==e)return i.ANIS_SGR_codes.trueBlack;if(i.ANIS_SGR_codes[e])return i.ANIS_SGR_codes[e]}return""},writeElement:function(e,t){document.getElementById?document.getElementById(e).innerHTML=t:document.all&&(document.all[e].innerHTML=t)},setElementXY:function(e,t,r){if(document.getElementById)document.getElementById(e);else document.all&&(document.all[e].style.left=t+"px",document.all[e].style.top=r+"px")},setVisible:function(e,t){document.getElementById?document.getElementById(e).style.visibility=t?"visible":"hidden":document.all&&(document.all[e].style.visibility=t?"visible":"hidden")},setDisplay:function(e,t){document.getElementById?document.getElementById(e).style.display=t:document.all&&(document.all[e].style.display=t)},guiElementsReady:function(e){return document.getElementById?!!document.getElementById(e):!!document.all&&!!document.all[e]},_termString_makeKeyref:function(){for(var e=Terminal.prototype.globals,t=e.termString_keyref=new Array,r=e.termString_keycoderef=new Array,i=new Array("A","B","C","D","E","F"),n=0;n<=15;n++)for(var o=n<10?n:i[n-10],s=0;s<=15;s++){var a=s<10?s:i[s-10],l=16*n+s;if(l>=32){var c=unescape("%"+o+a);t[l]=c,r[c]=l}}},_extendMissingStringMethods:function(){String.fromCharCode&&String.prototype.charCodeAt||Terminal.prototype.globals._termString_makeKeyref(),String.fromCharCode||(String.fromCharCode=function(e){return null!=e?Terminal.prototype.globals.termString_keyref[e]:""}),String.prototype.charCodeAt||(String.prototype.charCodeAt=function(e){return cs=this.charAt(e),Terminal.prototype.globals.termString_keycoderef[cs]?Terminal.prototype.globals.termString_keycoderef[cs]:0})}}},Terminal.prototype.globals._initGlobals();var TerminalDefaults=Terminal.prototype.Defaults,termDefaultHandler=Terminal.prototype.defaultHandler,TermGlobals=Terminal.prototype.globals,termKey=Terminal.prototype.globals.termKey,termDomKeyRef=Terminal.prototype.globals.termDomKeyRef;Terminal.prototype._HttpSocket=function(){var e=null;if(window.XMLHttpRequest)try{e=new XMLHttpRequest}catch(e){}else if(window.ActiveXObject)for(var t=this._msXMLHttpObjects,r=0;r<t.length;r++)try{if(e=new ActiveXObject(t[r])){t.length>1&&(this.prototype._msXMLHttpObjects=[t[r]]);break}}catch(e){}this.request=e,this.url,this.data=null,this.query="",this.timeoutTimer=null,this.localMode=Boolean(0==window.location.href.search(/^file:/i)),this.error=0},Terminal.prototype._HttpSocket.prototype={version:"1.02",useXMLEncoding:!1,defaulTimeout:1e4,defaultMethod:"GET",forceNewline:!0,errno:{OK:0,NOTIMPLEMENTED:1,FATALERROR:2,TIMEOUT:3,NETWORKERROR:4,LOCALFILEERROR:5},errstring:["","XMLHttpRequest not implemented.","Could not open XMLHttpRequest.","The connection timed out.","Network error.","The requested local document was not found."],_msXMLHttpObjects:["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","Msxml2.XMLHTTP.3.0"],serializeData:function(){this.query=this.serialize(this.data)},serialize:function(e){var t="";if(null!=e)switch(_typeof(e)){case"object":var r=[];if(e instanceof Array){for(var i=0;i<e.length;i++)r.push(this.serialize(e[i]));t=r.join(",");break}for(var i in e)switch(_typeof(e[i])){case"object":r.push(encodeURIComponent(i)+"="+this.serialize(e[i]));break;default:r.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]))}t=this.useXMLEncoding?r.join(";"):r.join("&");break;case"number":t=String(e);break;case"string":t=encodeURIComponent(e);break;case"boolean":t=e?"1":"0"}return t},toCamelCase:function(e){"string"!=typeof e&&(e=String(e));for(var t=e.toLowerCase().split("-"),r=t[0],i=1;i<t.length;i++)p=t[i],p.length&&(r+=p.charAt(0).toUpperCase()+p.substring(1));return r},callbackHandler:function(){if(!this.termRef.closed){var e=this.request;if(0!=this.error||4==e.readyState){this.timeoutTimer&&(clearTimeout(this.timeoutTimer),this.timeoutTimer=null);var t=!1,r=!0,i={headers:{},ErrorCodes:this.errno};if(this.localMode)this.error&&this.error<this.errno.NETWORKERROR?(i.status=0,i.statusText="Connection Error",i.responseText="",i.responseXML=null):this.error||null==e.responseText?(r=!1,i.status=404,i.statusText="Not Found",i.responseText="The document "+this.url+" was not found on this file system.",i.responseXML=null,this.error=this.errno.LOCALFILEERROR):(t=!0,r=!1,i.status=200,i.statusText="OK",i.responseText=e.responseText,i.responseXML=e.responseXML);else{try{this.error||"object"==_typeof(e)&&null!=e.status&&(r=!1,e.status>=200&&e.status<300?t=!0:e.status>=12e3&&(r=!0,this.error=this.errno.NETWORKERROR))}catch(e){}if(r)i.status=0,i.statusText="Connection Error",i.responseText="",i.responseXML=null;else if(i.status=e.status,i.statusText=404==e.status?"Not Found":e.statusText,i.responseText=e.responseText,i.responseXML=e.responseXML,this.getHeaders)if(this.getHeaders instanceof Array)for(var n=0;n<this.getHeaders.length;n++){var o=this.getHeaders[n];try{i.headers[this.toCamelCase(o)]=e.getResponseHeader(o)}catch(e){}}else for(var o in this.getHeaders)try{i.headers[this.toCamelCase(o)]=e.getResponseHeader(o)}catch(e){}}this.forceNewline&&(i.responseText=i.responseText.replace(/\r\n?/g,"\n")),i.url=this.url,i.data=this.data,i.query=this.query,i.method=this.method,i.success=t,i.errno=this.error,i.errstring=this.errstring[this.error];var s=this.termRef;s.socket=i,this.callback?"function"==typeof this.callback?this.callback.apply(s):window[this.callback]&&"function"==typeof window[this.callback]?window[this.callback].apply(s):s._defaultServerCallback():s._defaultServerCallback(),delete s.socket,this.request=null,this.callback=null}}},timeoutHandler:function(){this.error=this.errno.TIMEOUT;try{this.request.abort()}catch(e){}this.localMode||this.callbackHandler()}},Terminal.prototype.send=function(e){var t=new this._HttpSocket;if(e){if("string"==typeof e.method)switch(e.method.toLowerCase()){case"post":t.method="POST";break;case"get":t.method="GET";break;default:t.method=t.defaultMethod.toUpperCase()}else t.method=t.defaultMethod;null!=e.postbody?(t.method="POST",t.query=e.postbody,t.data=e.data):null!=e.data&&(t.data=e.data,t.serializeData()),e.url&&(t.url=e.url),e.getHeaders&&"object"==_typeof(e.getHeaders)&&(t.getHeaders=e.getHeaders)}else e={},t.method=t.defaultMethod;var r=t.url;if("GET"==t.method&&(t.query&&(r+=r.indexOf("?")<0?"?"+t.query:t.useXMLEncoding?";"+t.query:"&"+t.query),!t.localMode)){var i="_termlib_reqid="+(new Date).getTime()+"_"+Math.floor(1e5*Math.random());r+=r.indexOf("?")<0?"?"+i:t.useXMLEncoding?";"+i:"&"+i}if(t.callback=e.callback,t.termRef=this,!t.request)return t.error=t.errno.NOTIMPLEMENTED,void t.callbackHandler();try{null!=e.userid?null!=e.password?t.request.open(t.method,r,!0,e.userid,e.password):t.request.open(t.method,r,!0,e.userid):t.request.open(t.method,r,!0)}catch(e){return t.error=t.errno.FATALERROR,void t.callbackHandler()}var n=null;if("POST"==t.method){try{t.request.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}catch(e){}n=t.query}if(e.headers&&"objects"==typeof e.headers)for(var o in e.headers)try{t.request.setRequestHeader(o,e.headers[o])}catch(e){}if(e.mimetype&&t.request.overrideMimeType)try{t.request.overrideMimeType(e.mimetype),t.request.setRequestHeader("Connection","close")}catch(e){}var s=e.timeout&&"number"==typeof e.timeout?e.tiomeout:t.defaulTimeout;t.request.onreadystatechange=function(){t.callbackHandler()};try{t.request.send(n)}catch(e){if(t.localMode)t.request.onreadystatechange=null,t.request.abort(),t.error=t.errno.LOCALFILEERROR;else{t.request.onreadystatechange=null;try{t.request.abort()}catch(e){}t.error=t.errno.NETWORKERROR}return t.callbackHandler(),!0}t.timeoutTimer=setTimeout(function(){t.timeoutHandler()},s)},Terminal.prototype._defaultServerCallback=function(){if(this.socket.success)this.write("Server Response:%n"+this.socket.responseText,!0);else{var e="Request failed: "+this.socket.status+" "+this.socket.statusText;this.socket.errno&&(e+="%n"+this.socket.errstring),this.write(e),this.prompt()}},function(e){function t(i){if(r[i])return r[i].exports;var n=r[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,t),n.l=!0,n.exports}var r={};t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,i){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=18)}([function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==("undefined"==typeof window?"undefined":_typeof(window))&&(r=window)}e.exports=r},function(e,t,r){var i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)},n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.name,i=t.fn,n=t.type,o=void 0===n?"usr":n,s=t.shell,a=void 0===s?void 0:s,l=t.man,c=void 0===l?"":l;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"string"!=typeof r)throw Error("Command name must be a string");if("function"!=typeof i)throw Error("Command function must be... a function");this.fn=i.bind(this),this.name=r,this.type=o,this.man=c,a&&(this.shell=a)}return n(e,[{key:"exec",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("object"!==(void 0===e?"undefined":i(e))||Array.isArray(e))throw Error("Command exec ARGV Must be an [Object]");return Object.keys(e).length?this.fn(e):this.fn()}}]),e}();e.exports=o},function(e,t,r){var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.name,i=void 0===r?"":r,n=t.type,o=void 0===n?"file":n,s=t.content,a=void 0===s?"":s;(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.uid=this.genUid(),this.name=i,this.type=o,this.content=a,this.user="root",this.group="root","file"===this.type?this.permission="rwxr--r--":this.permission="drwxr-xr-x"}return i(e,[{key:"genUid",value:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}]),e}();e.exports=n},function(e,t,r){(function(t){var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),o=r(5),s=r(4),a=r(8),l=function(e){function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.filesystem,n=void 0===t?void 0:t,l=e.commands,c=void 0===l?void 0:l,h=e.env,u=void 0===h?{}:h;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var f=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=_typeof(t)&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));return f.polyfills(),f.Classes={Command:r(1),File:r(2)},f.fs=new s(n,f),f.env=i({},a,u),f.ShellCommands=f.registerCommands(f),f.ShellCommands=i({},f.ShellCommands,f.registerCommands(f,c)),f}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+_typeof(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,e),n(o,[{key:"polyfills",value:function(){return t.Promise||(t.Promise=r(10).Promise),t.fetch||(t.fetch=r(14)),!0}},{key:"run",value:function(e){return this.exec(e)}}]),o}(o);e.exports=l}).call(t,r(0))},function(e,t,r){var i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)},n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),o=r(7),s=r(2),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.shell=r,"object"!==(void 0===t?"undefined":i(t))||Array.isArray(t))throw new Error("Virtual Filesystem provided not valid, initialization failed.");t=JSON.parse(JSON.stringify(t)),this.FileSystem=this.initFs(t),this.cwd=["/"]}return n(e,[{key:"initFs",value:function(e){return this.buildVirtualFs(e),new s({name:"/",content:e,type:"dir"})}},{key:"buildVirtualFs",value:function(e){for(var t in e)e.hasOwnProperty(t)&&("object"!==i(e[t])||Array.isArray(e[t])?e[t]=new s({name:t,content:e[t]}):(e[t]=new s({name:t,content:e[t],type:"dir"}),this.buildVirtualFs(e[t].content)))}},{key:"pathStringToArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(!e.length)throw new Error("Path cannot be empty");if(e.match(/\/{2,}/g))throw new Error("-invalid path: "+e);var t=e.split("/");return""===t[0]&&(t[0]="/"),"."===t[0]&&t.shift(),""===t[t.length-1]&&t.pop(),"/"!==t[0]&&(t=this.cwd.concat(t)),t}},{key:"pathArrayToString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!Array.isArray(e))throw new Error("-fatal filesystem: path must be an array");if(!e.length)throw new Error("-invalid filesystem: path not provided");return e.join("/").replace(/\/{2,}/g,"/")}},{key:"fileWalker",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["/"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.FileSystem;if(!Array.isArray(e))throw new Error("Path must be an array of nodes, use Filesystem.pathStringToArray({string})");if(!(e=e.slice(0)).length)return"dir"===t.type?t.content:t;var r=e.shift();if("/"!==r){var i=t.content[r];if(!i)throw new Error("File doesn't exist");t=i}return this.fileWalker(e,t)}},{key:"getNode",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(arguments[1],"string"!=typeof e)throw new Error("Invalid input.");var t=void 0,r=void 0;try{t=this.pathStringToArray(e),r=this.fileWalker(t)}catch(e){throw e}return{path:e,pathArray:t,node:r}}},{key:"changeDir",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=void 0;if(".."===e){var r=this.cwd.splice(0,this.cwd.length-1);if(!r.length)return"You are in the root directory";e=this.pathArrayToString(r)}try{t=this.getNode(e,"dir")}catch(e){throw e}if("file"===t.node.type)throw new Error(t.pathArray[t.pathArray.length-1]+" is a file not a directory");return this.cwd=t.pathArray,"changed directory: "+this.getCurrentDirectory()}},{key:"listDir",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=void 0;try{t=this.getNode(e,"dir")}catch(e){throw e}return"file"===t.node.type&&(t.node=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}({},t.node.name,t.node)),t.node}},{key:"readFile",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=void 0;try{t=this.getNode(e,"file")}catch(e){throw e}if(!t.node.type)throw new Error(t.pathArray[t.pathArray.length-1]+" is a directory not a file");return t.node}},{key:"getCurrentDirectory",value:function(){var e=void 0;try{e=this.pathArrayToString(this.cwd)}catch(e){return"-invalid filesystem: An error occured while parsing current working directory to string."}return e}}]),e}();e.exports=a},function(e,t,r){var i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)},n=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),o=r(1),s=r(12),a=function(){function e(){(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")})(this,e),this.buildHistory()}return n(e,[{key:"parse",value:function(e){return new s(e)}},{key:"exec",value:function(e){this.setHistoryItem(e);var t=void 0;try{t=this.parse(e)}catch(e){return"-fatal command: "+(e.message||"Some Error Occured while parsing the command string.")}var r=this.ShellCommands[t.command];if(!r)return"-invalid shell: Command <"+t.command+"> doesn't exist.\n";var i=void 0;try{i=r.exec(t)}catch(e){return"-fatal "+t.command+": "+e.message}return this.format(i)}},{key:"format",value:function(e){return"function"==typeof e?"-invalid command: Command returned invalid data type.":void 0===e||void 0===e?"-invalid command: Command returned no data.":e}},{key:"registerCommands",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=r(6);if(t){if("object"!==(void 0===t?"undefined":i(t))||Array.isArray(t))throw new Error("Custom command provided are not in a valid format.");n=t}var s={};return Object.keys(n).map(function(t){var r=n[t];"string"==typeof r.name&&"function"==typeof r.fn&&(r.shell=e,s[t]=new o(r))}),s}},{key:"buildHistory",value:function(){localStorage.getItem("termlyHistory")||localStorage.setItem("termlyHistory",JSON.stringify([]))}},{key:"setHistoryItem",value:function(e){if(e.length){var t=JSON.parse(localStorage.getItem("termlyHistory"));return t.unshift(e),localStorage.setItem("termlyHistory",JSON.stringify(t))}}},{key:"getHistory",value:function(){return JSON.parse(localStorage.getItem("termlyHistory"))}},{key:"clearHistory",value:function(){return localStorage.setItem("termlyHistory",JSON.stringify([]))}}]),e}();e.exports=a},function(e,t,r){var i="function"==typeof Symbol&&"symbol"==_typeof(Symbol.iterator)?function(e){return _typeof(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":_typeof(e)},n=r(15),o=n.name,s=n.version,a=n.description,l=n.repository,c=n.author,h=n.license;e.exports={help:{name:"help",type:"builtin",man:"List of available commands\nType man <command> to have further info.",fn:function(){return"Commands available: "+Object.keys(this.shell.ShellCommands).join(", ")+'\nType "man <command>" to have further info.'}},whoami:{name:"whoami",type:"builtin",man:"Current user",fn:function(){return this.shell.user}},about:{name:"about",type:"builtin",man:"About this project",fn:function(){var e="";return e+="name: "+o+"\n",e+="version: "+s+"\n",e+="description: "+a+"\n",e+="repository: "+l+"\n",(e+="author: "+c+"\n")+"license: "+h+"\n"}},pwd:{name:"pwd",type:"builtin",man:"Print current working directory",fn:function(){return this.shell.fs.getCurrentDirectory()}},arguments:{name:"arguments",type:"builtin",man:"Return argument passed, used for testing purpose",fn:function(e){return JSON.stringify(e,null,2)}},printenv:{name:"printenv",type:"builtin",man:"Return environment variables",fn:function(){var e=this.shell.env,t="";return Object.keys(e).map(function(r){var n="object"!==i(e[r])||Array.isArray(e[r])?e[r]:JSON.stringify(e[r]);t+=r+"="+n+"\n"}),t}},export:{name:"export",type:"builtin",man:"Export a variable into the current environment",fn:function(e){if(!e||!e._.length)throw new Error("-fatal "+this.name+': Invalid syntax,\n correct syntax: export VAR=value or VAR="much value, such environment"');var t=e._,r=void 0,i=void 0;if(1===t.length){var n=t[0].split("=");r=n[0],i=n[1]}return t.length>1&&(r=t[0].replace(/=$/,""),i=t[1].replace(/(\'|\")/g,"")),this.shell.env[r]=i,r+"="+i}},cd:{name:"cd",type:"builtin",man:"Change directory, pass absolute or relative path: eg. cd /etc, cd / cd/my/nested/dir",fn:function(e){if(!e._.length)throw new Error("-invalid No path provided.");var t=e._.join();try{return this.shell.fs.changeDir(t)}catch(e){throw e}}},ls:{name:"ls",type:"builtin",man:"list directory files, pass absolute/relative path, if empty list current directory",fn:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{_:["./"]};e._.length||e._.push(".");var t=e._.join(),r=void 0,i="";try{r=this.shell.fs.listDir(t)}catch(e){throw e}for(var n in r)r.hasOwnProperty(n)&&(i+=r[n].permission+"\t"+r[n].user+" "+r[n].group+"\t"+r[n].name+"\n");return i}},cat:{name:"cat",type:"builtin",man:"Return file content, take one argument: file path (relative/absolute)",fn:function(){var e,t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{_:["./"]})._.join(),r=void 0;try{r=this.shell.fs.readFile(t)}catch(e){throw e}return r.content}},man:{name:"man",type:"builtin",man:"Command manual, takes one argument, command name",fn:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e._[0])throw new Error("man: no command provided.");var t=e._[0];if(!this.shell.ShellCommands[t])throw new Error("command doesn't exist.");if(!this.shell.ShellCommands[t].man)throw new Error("no manual entry for this command.");return this.shell.ShellCommands[t].man}},http:{name:"http",type:"builtin",man:"Send HTTP requests.\n syntax: http [OPTIONS FLAGS] URL.\neg: http -m GET http://jsonplaceholder.typicode.com/\n    options:\n    \t-m --method POST,GET,PUT,DELETE\n     \t--body must be an object, and MUST use single quoets inside eg: --body=\"{ 'data': '1' }\"\n     ",fn:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!e._.length)throw new Error("http: no URL provided, provide URL and/or method \n help: "+this.shell.ShellCommands.http.man);var t=e.method||e.m||"GET",r=e._[0],i=void 0;if(e.body)try{i=JSON.stringify(JSON.parse(e.body.replace(/\'/g,'"')))}catch(e){throw console.log(e),new Error("Body provided is not a valid JSON")}var n={method:t,headers:{"Content-Type":"application/json"}};return"GET"!==t&&(n.body=i),fetch(r,n).then(function(e){if(e.ok)return e.json();throw new Error("Request Failed ("+(e.status||500)+"): "+(e.statusText||"Some Error Occured."))}).catch(function(e){throw new Error("-fetch error response returned but it was not a valid JSON. Cannot Parse.")})}},history:{name:"history",type:"builtin",man:"Return list of previous executed commands, use -c flag to clear",fn:function(e){if(e.c)return this.shell.clearHistory(),"History Cleared.";for(var t=this.shell.getHistory().reverse(),r="",i=0;i<t.length;i++)r+=i+"\t"+t[i]+"\n";return r}}}},function(e,t,r){e.exports={"file.h":"#include <nope.h>",etc:{apache2:{"apache2.conf":"Not What you were looking for :)"}},home:{guest:{docs:{"mydoc.md":"TestFile","mydoc2.md":"TestFile2","mydoc3.md":"TestFile3"}}},root:{".zshrc":"not even close :)",".oh-my-zsh":{themes:{}}}}},function(e,t,r){(function(t){var r=(t||window).location;e.exports={USER:"root",HOSTNAME:r&&r.hostname.length?r.hostname:"my.host.me"}}).call(t,r(0))},function(e,t){function r(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function n(e){if(c===setTimeout)return setTimeout(e,0);if((c===r||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function o(){p&&f&&(p=!1,f.length?d=f.concat(d):m=-1,d.length&&s())}function s(){if(!p){var e=n(o);p=!0;for(var t=d.length;t;){for(f=d,d=[];++m<t;)f&&f[m].run();m=-1,t=d.length}f=null,p=!1,function(e){if(h===clearTimeout)return clearTimeout(e);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(e);try{h(e)}catch(t){try{return h.call(null,e)}catch(t){return h.call(this,e)}}}(e)}}function a(e,t){this.fun=e,this.array=t}function l(){}var c,h,u=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:r}catch(e){c=r}try{h="function"==typeof clearTimeout?clearTimeout:i}catch(e){h=i}}();var f,d=[],p=!1,m=-1;u.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];d.push(new a(e,t)),1!==d.length||p||n(s)},a.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=l,u.addListener=l,u.once=l,u.off=l,u.removeListener=l,u.removeAllListeners=l,u.emit=l,u.binding=function(e){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(e){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},function(e,t,r){(function(t){!function(r){function i(){}function n(e){if("object"!=_typeof(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(e,this)}function o(e,t){for(;3===e._state;)e=e._value;return 0===e._state?void e._deferreds.push(t):(e._handled=!0,void n._immediateFn(function(){var r=1===e._state?t.onFulfilled:t.onRejected;if(null!==r){var i;try{i=r(e._value)}catch(e){return void a(t.promise,e)}s(t.promise,i)}else(1===e._state?s:a)(t.promise,e._value)}))}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==_typeof(t)||"function"==typeof t)){var r=t.then;if(t instanceof n)return e._state=3,e._value=t,void l(e);if("function"==typeof r)return void h(function(e,t){return function(){e.apply(t,arguments)}}(r,t),e)}e._state=1,e._value=t,l(e)}catch(t){a(e,t)}}function a(e,t){e._state=2,e._value=t,l(e)}function l(e){2===e._state&&0===e._deferreds.length&&n._immediateFn(function(){e._handled||n._unhandledRejectionFn(e._value)});for(var t=0,r=e._deferreds.length;t<r;t++)o(e,e._deferreds[t]);e._deferreds=null}function c(e,t,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=r}function h(e,t){var r=!1;try{e(function(e){r||(r=!0,s(t,e))},function(e){r||(r=!0,a(t,e))})}catch(e){if(r)return;r=!0,a(t,e)}}var u=setTimeout;n.prototype.catch=function(e){return this.then(null,e)},n.prototype.then=function(e,t){var r=new this.constructor(i);return o(this,new c(e,t,r)),r},n.all=function(e){var t=Array.prototype.slice.call(e);return new n(function(e,r){function i(o,s){try{if(s&&("object"==_typeof(s)||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,function(e){i(o,e)},r)}t[o]=s,0==--n&&e(t)}catch(e){r(e)}}if(0===t.length)return e([]);for(var n=t.length,o=0;o<t.length;o++)i(o,t[o])})},n.resolve=function(e){return e&&"object"==_typeof(e)&&e.constructor===n?e:new n(function(t){t(e)})},n.reject=function(e){return new n(function(t,r){r(e)})},n.race=function(e){return new n(function(t,r){for(var i=0,n=e.length;i<n;i++)e[i].then(t,r)})},n._immediateFn="function"==typeof t&&function(e){t(e)}||function(e){u(e,0)},n._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},n._setImmediateFn=function(e){n._immediateFn=e},n._setUnhandledRejectionFn=function(e){n._unhandledRejectionFn=e},void 0!==e&&e.exports?e.exports=n:r.Promise||(r.Promise=n)}(this)}).call(t,r(13).setImmediate)},function(e,t,r){(function(e,t){!function(e,r){function i(e){delete a[e]}function n(e){if(l)setTimeout(n,0,e);else{var t=a[e];if(t){l=!0;try{!function(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(r,i)}}(t)}finally{i(e),l=!1}}}}if(!e.setImmediate){var o,s=1,a={},l=!1,c=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?o=function(e){t.nextTick(function(){n(e)})}:function(){if(e.postMessage&&!e.importScripts){var t=!0,r=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=r,t}}()?function(){var t="setImmediate$"+Math.random()+"$",r=function(r){r.source===e&&"string"==typeof r.data&&0===r.data.indexOf(t)&&n(+r.data.slice(t.length))};e.addEventListener?e.addEventListener("message",r,!1):e.attachEvent("onmessage",r),o=function(r){e.postMessage(t+r,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){n(e.data)},o=function(t){e.port2.postMessage(t)}}():c&&"onreadystatechange"in c.createElement("script")?function(){var e=c.documentElement;o=function(t){var r=c.createElement("script");r.onreadystatechange=function(){n(t),r.onreadystatechange=null,e.removeChild(r),r=null},e.appendChild(r)}}():o=function(e){setTimeout(n,0,e)},h.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var i={callback:e,args:t};return a[s]=i,o(s),s++},h.clearImmediate=i}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,r(0),r(9))},function(e,t,r){var i=function(){function e(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,r,i){return r&&e(t.prototype,r),i&&e(t,i),t}}(),n=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t||!t.length)throw new Error("Parser: command provided is empty.");if("string"!=typeof t)throw new Error("Parser: command must be a string!");this.raw=t;var r=this.stringToArray(t.replace(/\s{2,}/g,"").replace(/\t|\n/g," "));if(this.command=r[0],this._=[],r.length){var i=this.parse(r.slice(1));if(!Object.assign){for(var n in i)i.hasOwnProperty(n)&&(this[n]=i[n]);return!0}return Object.assign(this,i)}}return i(e,[{key:"stringToArray",value:function(e){return e.match(/[^\s"']+|"([^"]*)"|'([^']*)'/g)}},{key:"parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e.length)return t;if(e[0].match(/^\-[^\-].*/)){var r=e[0].replace("-","");return e[1]&&e[1].match(/^\-.*/)?(t[r]=!0,this.parse(e.splice(1),t)):e[1]?(t[r]=e[1],this.parse(e.splice(2),t)):(t[r]=!0,this.parse(e.splice(1),t))}if(e[0].match(/^\-{2}.*\=$/))return t[e[0].match(/--(.*)=/)[1]]=e[1].replace(/"/g,""),this.parse(e.splice(2),t);if(e[0].match(/^\-{2}.*\={1}.*$/))return t[e[0].match(/\-{2}(.*)=/)[1]]=e[0].match(/\={1}(.*)/)[1],this.parse(e.splice(1),t);if(e[0].match(/^\-{2}.*$/)){var i=e[0].replace("--","");if(!e[1]||e[1]&&e[1].match(/^\-{1,}/))return t[i]=!0,this.parse(e.slice(1),t);if(e[1]&&!e[1].match(/^\-{1,}/))return t[i]=e[1],this.parse(e.slice(2),t)}return this._.push(e.shift()),this.parse(e,t)}}]),e}();try{e.exports=n}catch(e){}},function(e,t,r){function i(e,t){this._id=e,this._clearFn=t}var n=Function.prototype.apply;t.setTimeout=function(){return new i(n.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new i(n.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},r(11),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t){!function(e){function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function r(e){return"string"!=typeof e&&(e=String(e)),e}function i(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return p.iterable&&(t[Symbol.iterator]=function(){return t}),t}function n(e){this.map={},e instanceof n?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(e){return e.bodyUsed?Promise.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function s(e){return new Promise(function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function a(e){var t=new FileReader,r=s(t);return t.readAsArrayBuffer(e),r}function l(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function c(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"==typeof e)this._bodyText=e;else if(p.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(p.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(p.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(p.arrayBuffer&&p.blob&&y(e))this._bodyArrayBuffer=l(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!p.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!b(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=l(e)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):p.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},p.blob&&(this.blob=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(a)}),this.text=function(){var e=o(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,r=s(t);return t.readAsText(e),r}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),i=0;i<t.length;i++)r[i]=String.fromCharCode(t[i]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},p.formData&&(this.formData=function(){return this.text().then(u)}),this.json=function(){return this.text().then(JSON.parse)},this}function h(e,t){var r=(t=t||{}).body;if(e instanceof h){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new n(e.headers)),this.method=e.method,this.mode=e.mode,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new n(t.headers)),this.method=function(e){var t=e.toUpperCase();return g.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function u(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var r=e.split("="),i=r.shift().replace(/\+/g," "),n=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(n))}}),t}function f(e){var t=new n;return e.split(/\r?\n/).forEach(function(e){var r=e.split(":"),i=r.shift().trim();if(i){var n=r.join(":").trim();t.append(i,n)}}),t}function d(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new n(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var p={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(p.arrayBuffer)var m=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],y=function(e){return e&&DataView.prototype.isPrototypeOf(e)},b=ArrayBuffer.isView||function(e){return e&&m.indexOf(Object.prototype.toString.call(e))>-1};n.prototype.append=function(e,i){e=t(e),i=r(i);var n=this.map[e];this.map[e]=n?n+","+i:i},n.prototype.delete=function(e){delete this.map[t(e)]},n.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},n.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},n.prototype.set=function(e,i){this.map[t(e)]=r(i)},n.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},n.prototype.keys=function(){var e=[];return this.forEach(function(t,r){e.push(r)}),i(e)},n.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),i(e)},n.prototype.entries=function(){var e=[];return this.forEach(function(t,r){e.push([r,t])}),i(e)},p.iterable&&(n.prototype[Symbol.iterator]=n.prototype.entries);var g=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.prototype.clone=function(){return new h(this,{body:this._bodyInit})},c.call(h.prototype),c.call(d.prototype),d.prototype.clone=function(){return new d(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new n(this.headers),url:this.url})},d.error=function(){var e=new d(null,{status:0,statusText:""});return e.type="error",e};var v=[301,302,303,307,308];d.redirect=function(e,t){if(-1===v.indexOf(t))throw new RangeError("Invalid status code");return new d(null,{status:t,headers:{location:e}})},e.Headers=n,e.Request=h,e.Response=d,e.fetch=function(e,t){return new Promise(function(r,i){var n=new h(e,t),o=new XMLHttpRequest;o.onload=function(){var e={status:o.status,statusText:o.statusText,headers:f(o.getAllResponseHeaders()||"")};e.url="responseURL"in o?o.responseURL:e.headers.get("X-Request-URL");var t="response"in o?o.response:o.responseText;r(new d(t,e))},o.onerror=function(){i(new TypeError("Network request failed"))},o.ontimeout=function(){i(new TypeError("Network request failed"))},o.open(n.method,n.url,!0),"include"===n.credentials&&(o.withCredentials=!0),"responseType"in o&&p.blob&&(o.responseType="blob"),n.headers.forEach(function(e,t){o.setRequestHeader(t,e)}),o.send(void 0===n._bodyInit?null:n._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(e,t){e.exports={name:"termly.js",version:"2.5.7",description:"Simple, Extensible, Hackable and Lightweight Javascript Browser Terminal Simulator!",main:"bin/classes/Shell.js",scripts:{test:"mocha --compilers babel-core/register tests/",build:"NODE_ENV=production webpack -p","build:dev":"webpack -w"},keywords:["terminal","javascript","simulator","browser","presentation","mockup","demo","cli","prompt","commands","no depency","lightweight","hackable","js","vanilla"],repository:"https://github.com/Kirkhammetz/termly.js",author:"Simone Corsi",license:"GNU GPLv3",devDependencies:{babel:"^6.5.2","babel-core":"^6.21.0","babel-loader":"^6.2.10","babel-plugin-transform-object-rest-spread":"^6.22.0","babel-polyfill":"^6.22.0","babel-preset-es2015":"^6.18.0","babel-preset-stage-3":"^6.22.0",chai:"^3.5.0",gulp:"^3.9.1","gulp-sass":"^3.1.0",mocha:"^3.2.0","promise-polyfill":"^6.0.2","string-to-argv.js":"^1.1.2",webpack:"beta","whatwg-fetch":"^2.0.2"}}},,,function(e,t,r){(function(e){e.Termly=r(3)}).call(t,r(0))}]);var Validator=function(){function e(t){_classCallCheck(this,e),this.question=t}return _createClass(e,[{key:"validate",value:function(e){throw new Error("Abstract method")}}],[{key:"create",value:function(e){return e.type==String?new StringValidator(e):e.type==Number?new NumberValidator(e):e.type==Array?new ArrayValidator(e):void 0}}]),e}(),StringValidator=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,Validator),_createClass(t,[{key:"validate",value:function(e){return e.__proto__==String.prototype&&(this.question.range?e.length>=this.question.range[0]&&e.length<=this.question.range[1]:!this.question.regex||this.question.regex.test(e))}}]),t}(),NumberValidator=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,Validator),_createClass(t,[{key:"validate",value:function(e){return(e instanceof Number||NaN!=(e=parseInt(e)))&&(!this.question.range||e>=this.question.range[0]&&e<=this.question.range[1])}}]),t}(),ArrayValidator=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).apply(this,arguments))}return _inherits(t,Validator),_createClass(t,[{key:"validate",value:function(e){return(e instanceof Number||NaN!==(e=parseInt(e)))&&(e>=0&&e<this.question.answers.length)}}]),t}(),Shell=function(){function e(t){var r=this;if(_classCallCheck(this,e),!t.hasOwnProperty("id"))throw new Error("Element id must be provided!");if(!t.hasOwnProperty("form"))throw new Error("Form questions must be provided!");this.registerCallback=t.register||function(e){console.log(e)},this.form=t.form.reverse(),this.system=new Termly({commands:{shell:{name:"shell",type:"builtin",man:"Interactive Shell",fn:function(){return""}},clear:{name:"clear",type:"builtin",man:"Clear the screen",fn:function(){return r.cli.clear(),""}},whoami:{name:"whoami",type:"builtin",man:"Shows the name of the current user",fn:function(){return r.system.env.USER}},exit:{name:"exit",type:"builtin",man:"Exit the shell",fn:function(){return setTimeout(function(){return r.cli.close()},1e3),r.cli.write(":'("),""}},join:{name:"join",type:"usr",man:"Become a shellmate",fn:function(){var e=r,t=_toConsumableArray(r.form),i={};return function r(){if(!t.length)return e.register(i),e.cli.prompt();var n=t.pop();e.cli.write(n.question+"%n");if(n.type==Array){var o=0,s=!0,a=!1,l=void 0;try{for(var c,h=n.answers[Symbol.iterator]();!(s=(c=h.next()).done);s=!0){var u=c.value;e.cli.write("".concat(o,". ").concat(u,"%n")),o++}}catch(e){a=!0,l=e}finally{try{s||null==h.return||h.return()}finally{if(a)throw l}}}e.cli.scan().then(function t(o){var s=Validator.create(n);s.validate(o)?(i[n.id]=n.type==Array?n.answers[o]:o,r()):(e.cli.write("Invalid input, please retry"),e.cli.scan().then(function(e){return t(e)}))})}(),""}}},filesystem:{init:"Binary executable.",etc:{apache2:{"apache2.conf":""},apt:{"sources.list":""}},home:{guest:{docs:{homework:"I got none of that."},"todo.txt":["# Things i need to do","","* Join the shellmates","* Buy some wafer","* Do some random thing"]}},root:{"README.md":["Hey!","You are not supposed to be seeing this."]},usr:{share:{themes:{},games:{}}},bin:{help:"Binary executable.",whoami:"Binary executable.",pwd:"Binary executable.",printenv:"Binary executable.",export:"Binary executable.",cd:"Binary executable.",ls:"Binary executable.",cat:"Binary executable.",man:"Binary executable.",history:"Binary executable.",clear:"Binary executable.",exit:"Binary executable.",join:"Binary executable.",shell:"Binary executable."}},env:{USER:"guest",PATH:"/bin",HOSTNAME:"shellmates"}}),this.system.fs.FileSystem.content.home.content.guest.user="guest",this.system.fs.FileSystem.content.home.content.guest.group="guest",this.system.fs.FileSystem.content.home.content.guest.content.docs.user="guest",this.system.fs.FileSystem.content.home.content.guest.content.docs.group="guest",this.system.fs.FileSystem.content.home.content.guest.content["todo.txt"].user="guest",this.system.fs.FileSystem.content.home.content.guest.content["todo.txt"].group="guest",this.system.fs.FileSystem.content.home.content.guest.content.docs.content.homework.user="guest",this.system.fs.FileSystem.content.home.content.guest.content.docs.content.homework.group="guest",this.system.fs.FileSystem.content.init.permission="rwx------";for(var i=["help","whoami","pwd","printenv","export","cd","ls","cat","man","history","clear","exit","join","shell"],n=0;n<i.length;n++){var o=i[n];this.system.fs.FileSystem.content.bin.content[o].permission="rwxr-xr-x"}this.system.run("cd /home/guest"),delete this.system.ShellCommands.about,delete this.system.ShellCommands.arguments,delete this.system.ShellCommands.http;var s=this.system,a=Math.min(80,(window.innerWidth/8).toFixed(0)),l=(.75*a/2.5).toFixed(0);a<50&&(l=20),this.cli=new Terminal({greeting:"%+r == Shellmates == %-r%nType %c7help%c0 for help.%nType %c7join%c0 to join the %c5shellmates%c0%n",ps:function(){var e=s.fs.cwd.slice(1).join("/");return"%c3".concat(s.env.USER,"@shellmates:%c7").concat("home/guest"==e?"~":"/".concat(e),"%c0 $")},id:0,x:0,y:0,cols:a,rows:l,frameWidth:10,frameColor:"black",bgColor:"black",termDiv:t.id,crsrBlinkMode:!0,handler:function(){var e=this.lineBuffer;if(this.newLine(),""!=e){if(this.scanning)return void this.scanned(e);this.write(s.run(e))}this.prompt()},initHandler:function(){this.clear();var e=this,t=20;!function r(){e.clear(),e.write("loading".concat(".".repeat((20-t)%4),"%n[").concat("=".repeat(20-t),">").concat(" ".repeat(t),"]")),0==--t?(e.clear(),e.write(e.conf.greeting),e.newLine(),e.prompt()):setTimeout(r,200)}()}}),this.cli.open();var c=this.cli;document.addEventListener("keydown",function(e){"c"==e.key&&e.ctrlKey&&(c.write("^C"),c.scanning=!1,c.prompt())})}return _createClass(e,[{key:"register",value:function(e){this.registerCallback(e)}}]),e}(),shell=new Shell({id:"terminal",register:function(e){this.system.env.USER=e.name.toLowerCase().split(" ").join("-"),this.cli.write("Your response has been registered!"),console.log(e)},form:[{id:"name",question:"What's your full name?",type:String,range:[0,50]},{id:"email",question:"What's your email?",type:String,regex:/^\S+@\S+\.\S+$/},{id:"age",question:"How old are you?",type:Number,range:[18,36]},{id:"wilaya",question:"Where are you from?",type:Array,answers:["Alger","Setif","Blida"]}]});function showTerminal(){document.getElementById("terminal-overlay").style.visibility="visible",document.getElementById("terminal").style.opacity="0.9"}document.getElementById("register-btn").addEventListener("click",showTerminal);